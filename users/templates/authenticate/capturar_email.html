{% extends 'base.html' %}
{% load static %}

{% block body %}
<style>
  body {
    background-image: url("{% static 'img/enacif_plantel.png' %}");
    background-repeat: no-repeat;
    background-attachment: fixed;
    background-position: center center;
    background-size: cover;
  }

  .floating-div {
    position: absolute; /* Cambia a absolute para que el div sea flotante */
    top: 50%; /* Centra verticalmente */
    left: 50%; /* Centra horizontalmente */
    transform: translate(-50%, -50%); /* Ajusta la posición para centrar */
    background-color: rgba(17, 16, 16, 0.57); /* Fondo azul con 80% de opacidad */
    border-radius: 10px;
    box-shadow: 0 4px 8px rgb(0, 0, 0);
    z-index: 1000; /* Asegura que el div esté por encima de otros elementos */
    padding: 20px; /* Añadir padding para el contenido */
  }

  .alert-info {
    background-color: rgba(23, 162, 184, 0.8);
    border-color: rgba(23, 162, 184, 0.9);
    color: white;
  }
</style>

<div class="container d-flex justify-content-center align-items-center" style="min-height: 100vh;">
  <div class="col-md-6 p-4 floating-div">
    {% if messages %}
      {% for message in messages %}
        <div class="alert alert-{% if message.tags %}{{ message.tags }}{% else %}info{% endif %}" role="alert">
          <p class="mb-1">{{ message }}</p>
        </div>
      {% endfor %}
    {% endif %}
    
    <div class="alert alert-info" role="alert">
      <h4 class="alert-heading">¡Bienvenido {{ user.first_name }}!</h4>
      <p>Para continuar con tu proceso de inscripción, necesitamos que proporciones tu correo electrónico.</p>
      <hr>
      <p class="mb-0">Este correo será utilizado para enviarte información importante sobre tus materias y notificaciones del sistema.</p>
    </div>
    
    <h3 class="text-center mb-4" style="color: aliceblue;">Registro de Email</h3>
    
    <form method="POST">
      {% csrf_token %}
      
      <div class="form-group">
        <label for="{{ form.email_requerido.id_for_label }}" class="font-weight-bold" style="color: aliceblue;">
          {{ form.email_requerido.label }}
        </label>
        {{ form.email_requerido }}
        {% if form.email_requerido.help_text %}
          <small class="form-text" style="color: #ccc;">{{ form.email_requerido.help_text }}</small>
        {% endif %}
        {% if form.email_requerido.errors %}
          <div class="text-danger">
            {% for error in form.email_requerido.errors %}
              <small>{{ error }}</small>
            {% endfor %}
          </div>
        {% endif %}
      </div>

      <div class="mt-4 d-flex justify-content-end">
        <button type="submit" class="btn btn-primary btn-lg">Continuar</button>
      </div>
    </form>
    
    <div class="mt-3">
      <small style="color: #ccc;">
        <strong>Nota:</strong> Una vez que proporciones tu email, podrás acceder a tus asignaturas y realizar inscripciones.
      </small>
    </div>
  </div>
</div>
{% endblock body %}
